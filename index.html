<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ë…ë„ë¬¸ë°©êµ¬ ë°°ì†¡ ê³„ì‚°ê¸°</title>
    <meta name="description" content="ìš¸ë¦‰ë„ í˜„ì§€ ë‚ ì”¨ì™€ ë°°í¸ì„ ë¶„ì„í•˜ì—¬ ì •í™•í•œ ë„ì°© ì˜ˆì •ì¼ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.">
    <meta property="og:title" content="ë…ë„ë¬¸ë°©êµ¬ ë°°ì†¡ ì˜ˆì¸¡ ì‹œìŠ¤í…œ">
    <meta property="og:description" content="ì§€ê¸ˆ ì£¼ë¬¸í•˜ë©´ ì–¸ì œ ë„ì°©í• ê¹Œìš”? ì‹¤ì‹œê°„ íŒŒê³ ì™€ ë°°í¸ì„ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤.">
    <meta property="og:image" content="https://your-domain.com/images/thumbnail.jpg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-900 text-white min-h-screen flex items-center justify-center p-4">

    <div class="max-w-md w-full bg-slate-800 rounded-2xl shadow-2xl overflow-hidden border border-slate-700">
        
        <div class="bg-slate-900 p-6 text-center border-b border-slate-700">
            <div class="text-4xl mb-2">ğŸš¢</div>
            <h1 class="text-2xl font-black text-blue-400">ë…ë„ë¬¸ë°©êµ¬ ë°°ì†¡ ê³„ì‚°ê¸°</h1>
            <p class="text-slate-400 text-sm mt-1">ìš¸ë¦‰ë„ í˜„ì§€ ë‚ ì”¨(íŒŒê³ ) ê¸°ë°˜ ì˜ˆì¸¡ ì‹œìŠ¤í…œ</p>
        </div>

        <div class="bg-blue-900/30 p-4 text-xs text-blue-200 border-b border-blue-800/50">
            â„¹ï¸ <b>ì•ˆë‚´:</b> ì •í™•í•œ ì˜ˆì¸¡ì„ ìœ„í•´ <b>ê¸°ìƒì²­ ë‹¨ê¸°ì˜ˆë³´(3ì¼)</b> ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
            ì˜¤ëŠ˜ë¶€í„° ëª¨ë ˆê¹Œì§€ì˜ ì£¼ë¬¸ ê±´ì— ëŒ€í•´ì„œë§Œ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        </div>

        <div class="p-6 space-y-6">
            <div>
                <label class="block text-slate-300 text-sm font-bold mb-2">ì£¼ë¬¸ ë‚ ì§œ</label>
                <input type="date" id="orderDate" class="w-full bg-slate-700 border border-slate-600 text-white rounded-lg p-3 focus:outline-none focus:border-blue-500 transition-colors cursor-pointer">
            </div>

            <div>
                <label class="block text-slate-300 text-sm font-bold mb-2">ì£¼ë¬¸ ì‹œê°„ (ì˜¤ì „ 10ì‹œ ë§ˆê°)</label>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="setOrderTime(9)" id="timeBefore" class="time-btn bg-blue-600 text-white py-3 rounded-lg font-bold border-2 border-transparent transition-all">
                        ì˜¤ì „ 10ì‹œ ì „<br><span class="text-xs font-normal text-blue-100">(ë‹¹ì¼ ë°œì†¡ ê°€ëŠ¥)</span>
                    </button>
                    <button onclick="setOrderTime(14)" id="timeAfter" class="time-btn bg-slate-700 text-slate-400 py-3 rounded-lg font-bold border-2 border-transparent hover:bg-slate-600 transition-all">
                        ì˜¤ì „ 10ì‹œ í›„<br><span class="text-xs font-normal text-slate-500">(ë‹¤ìŒ ë°°í¸)</span>
                    </button>
                </div>
                <input type="hidden" id="selectedHour" value="9">
            </div>

            <button onclick="calculateShipping()" class="w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-black py-4 rounded-xl text-lg shadow-lg transform transition hover:scale-[1.02]">
                ì˜ˆìƒ ë„ì°©ì¼ ì¡°íšŒí•˜ê¸° ğŸ”
            </button>
        </div>

        <div id="resultArea" class="hidden bg-slate-900 p-6 border-t border-slate-700 animate-fade-in">
            <div class="text-center">
                <p class="text-slate-400 text-sm mb-1">ì˜ˆìƒ ë„ì°©ì¼ì€?</p>
                <h2 id="arrivalDateText" class="text-3xl font-black text-yellow-400 mb-4"></h2>
                
                <div class="p-4 bg-slate-800 rounded-xl border border-slate-700 text-left space-y-4">
                     <div class="flex items-center">
                        <div class="w-8 text-center text-xl">ğŸ›’</div>
                        <div>
                            <p class="text-xs text-slate-500">ì£¼ë¬¸ ì ‘ìˆ˜</p>
                            <p id="step1_text" class="font-bold text-slate-200">-</p>
                        </div>
                    </div>
                    
                    <div class="pl-3 text-slate-600 text-sm">â–¼</div>

                    <div class="flex items-start"> <div class="w-8 text-center text-xl mt-1">ğŸš¢</div>
                        <div>
                            <p class="text-xs text-slate-500">ìš¸ë¦‰ë„ ì¶œí•­ (ë°° ëœ¨ëŠ” ë‚ )</p>
                            <p id="step2_text" class="font-bold text-blue-300">-</p>
                            <p id="weather_warning" class="text-xs text-red-400 mt-2 bg-red-900/20 p-2 rounded border border-red-900/50 hidden leading-relaxed">
                                </p>
                        </div>
                    </div>

                    <div class="pl-3 text-slate-600 text-sm">â–¼</div>

                    <div class="flex items-center">
                        <div class="w-8 text-center text-xl">ğŸ</div>
                        <div>
                            <p class="text-xs text-slate-500">ë„ì°© ì˜ˆì •</p>
                            <p id="step3_text" class="font-bold text-yellow-400 text-lg">-</p>
                        </div>
                    </div>
                </div>

                <div class="mt-4 p-3 bg-slate-800/50 rounded text-xs text-slate-500 leading-relaxed">
                    * ë„ì„œì‚°ê°„ ì§€ì—­ì€ 1-2ì¼ ì¶”ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                    * ì²œì¬ì§€ë³€ ë“± ê¸°ìƒ ê¸‰ë³€ ì‹œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- [ì„¤ì • ë° ìœ í‹¸ë¦¬í‹°] ---
        const dateInput = document.getElementById('orderDate');
        const today = new Date();
        
        // í¬ë§· í•¨ìˆ˜ (YYYY. M. D (ìš”ì¼)) -> ëª¨ë“  ë‚ ì§œ í‘œì‹œì— ê³µí†µ ì‚¬ìš©
        function formatDateFull(date) {
            const days = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];
            return `${date.getFullYear()}. ${date.getMonth()+1}. ${date.getDate()} (${days[date.getDay()]})`;
        }

        // ë‚ ì§œ ì œí•œ (ì˜¤ëŠ˜ ~ ëª¨ë ˆ)
        function setDateLimits() {
            const offset = today.getTimezoneOffset() * 60000;
            const localDate = new Date(today.getTime() - offset);
            const minStr = localDate.toISOString().split('T')[0];
            
            const maxDate = new Date(today);
            maxDate.setDate(today.getDate() + 2);
            const maxStr = new Date(maxDate.getTime() - offset).toISOString().split('T')[0];

            dateInput.min = minStr;
            dateInput.max = maxStr;
            dateInput.value = minStr;
        }
        setDateLimits();

        // UI ë²„íŠ¼ ë™ì‘
        function setOrderTime(hour) {
            document.getElementById('selectedHour').value = hour;
            const btnBefore = document.getElementById('timeBefore');
            const btnAfter = document.getElementById('timeAfter');
            
            if (hour < 10) {
                btnBefore.className = "time-btn bg-blue-600 text-white py-3 rounded-lg font-bold border-2 border-transparent transition-all";
                btnBefore.querySelector('span').classList.replace("text-slate-500", "text-blue-100");
                btnAfter.className = "time-btn bg-slate-700 text-slate-400 py-3 rounded-lg font-bold border-2 border-transparent hover:bg-slate-600 transition-all";
                btnAfter.querySelector('span').classList.replace("text-blue-100", "text-slate-500");
            } else {
                btnBefore.className = "time-btn bg-slate-700 text-slate-400 py-3 rounded-lg font-bold border-2 border-transparent hover:bg-slate-600 transition-all";
                btnBefore.querySelector('span').classList.replace("text-blue-100", "text-slate-500");
                btnAfter.className = "time-btn bg-blue-600 text-white py-3 rounded-lg font-bold border-2 border-transparent transition-all";
                btnAfter.querySelector('span').classList.replace("text-slate-500", "text-blue-100");
            }
        }

        // --- [í•µì‹¬ ë¡œì§] ---
        
        // ê°€ì§œ ë‚ ì”¨ (í…ŒìŠ¤íŠ¸ìš©: 10ì¼, 20ì¼ì€ ê²°í•­)
        function getVirtualWeather(date) {
            const day = date.getDate();
            if (day === 10 || day === 20) return { isBad: true }; 
            return { isBad: false }; 
        }

        function calculateShipping() {
            const dateStr = dateInput.value;
            const hour = parseInt(document.getElementById('selectedHour').value);
            
            if (!dateStr) { alert("ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”."); return; }

            // 1. ì´ˆê¸° ì£¼ë¬¸ ë‚ ì§œ ì„¸íŒ…
            let currentDate = new Date(dateStr);
            currentDate.setHours(hour);

            // âœ… ìš”ì²­ ë°˜ì˜ 1: ì£¼ë¬¸ ì ‘ìˆ˜ ë‚ ì§œë„ í’€ í¬ë§·ìœ¼ë¡œ í‘œì‹œ
            // ê³„ì‚° ë¡œì§ ë“¤ì–´ê°€ê¸° ì „, ì›ë³¸ ë‚ ì§œë¥¼ ì €ì¥í•´ë‘ 
            const initialOrderDateStr = formatDateFull(currentDate);

            // 2. ì£¼ë¬¸ ë§ˆê°(10ì‹œ) ì²´í¬
            const SHIPPING_DAYS = [2, 4, 6]; // í™”, ëª©, í† 
            if (SHIPPING_DAYS.includes(currentDate.getDay()) && hour >= 10) {
                currentDate.setDate(currentDate.getDate() + 1);
            }

            // 3. ì¶œí•­ ê°€ëŠ¥ì¼ ì°¾ê¸° (ë‚ ì”¨ ì²´í¬)
            let delayedDateText = ""; // âœ… ê²°í•­ëœ ë‚ ì§œë¥¼ ì €ì¥í•  ë³€ìˆ˜
            let attempts = 0;
            
            while (attempts < 7) {
                const day = currentDate.getDay();
                
                // ë°°ì†¡ ìš”ì¼ì´ ì•„ë‹ˆë©´ íŒ¨ìŠ¤
                if (!SHIPPING_DAYS.includes(day)) {
                    currentDate.setDate(currentDate.getDate() + 1);
                    continue;
                }

                // ë°°ì†¡ ìš”ì¼ì´ë©´ ë‚ ì”¨ í™•ì¸
                const weather = getVirtualWeather(currentDate);
                
                if (weather.isBad) {
                    console.log("ê²°í•­ ë°œìƒ: " + formatDateFull(currentDate));
                    // âœ… ê²°í•­ëœ ë‚ ì§œ ì €ì¥ (ë©”ì‹œì§€ìš©)
                    delayedDateText = formatDateFull(currentDate); 
                    currentDate.setDate(currentDate.getDate() + 1); 
                } else {
                    break; // ì¶œí•­ í™•ì •
                }
                attempts++;
            }

            // 4. ë„ì°©ì¼ ê³„ì‚° (ì¶œí•­ì¼ + 2ì¼)
            const shipDate = new Date(currentDate);
            const arrivalDate = new Date(shipDate);
            arrivalDate.setDate(arrivalDate.getDate() + 2);

            // 5. ê²°ê³¼ í™”ë©´ ì—…ë°ì´íŠ¸
            document.getElementById('resultArea').classList.remove('hidden');
            
            document.getElementById('step1_text').innerText = initialOrderDateStr; // âœ… ìˆ˜ì •ë¨
            document.getElementById('step2_text').innerText = formatDateFull(shipDate);
            document.getElementById('step3_text').innerText = formatDateFull(arrivalDate);
            document.getElementById('arrivalDateText').innerText = formatDateFull(arrivalDate);

            // âœ… ìš”ì²­ ë°˜ì˜ 2: êµ¬ì²´ì ì¸ ë‚ ì§œê°€ í¬í•¨ëœ ê²½ê³  ë©”ì‹œì§€
            const warnBox = document.getElementById('weather_warning');
            if (delayedDateText) {
                warnBox.innerText = `âš ï¸ ê¸°ìƒì²­ ë‚ ì”¨ ì˜ˆë³´ ë°˜ì˜ ê²°ê³¼ ${delayedDateText} ë°°í¸ì€ ë†’ì€ íŒŒê³ ë¡œ ê²°í•­ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.`;
                warnBox.classList.remove('hidden');
            } else {
                warnBox.classList.add('hidden');
            }
        }
    </script>
</body>
</html>
