<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ë…ë„ë¬¸ë°©êµ¬ ë°°ì†¡ ê³„ì‚°ê¸°</title>
    <meta name="description" content="ìš¸ë¦‰ë„ í˜„ì§€ ë‚ ì”¨ì™€ ë°°í¸ì„ ë¶„ì„í•˜ì—¬ ì •í™•í•œ ë„ì°© ì˜ˆì •ì¼ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.">
    <meta property="og:title" content="ë…ë„ë¬¸ë°©êµ¬ ë°°ì†¡ ì˜ˆì¸¡ ì‹œìŠ¤í…œ">
    <meta property="og:description" content="ì§€ê¸ˆ ì£¼ë¬¸í•˜ë©´ ì–¸ì œ ë„ì°©í• ê¹Œìš”? ì‹¤ì‹œê°„ íŒŒê³ ì™€ ë°°í¸ì„ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤.">
    <meta property="og:image" content="https://your-domain.com/images/thumbnail.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-900 text-white min-h-screen flex items-center justify-center p-4">

    <div class="max-w-md w-full bg-slate-800 rounded-2xl shadow-2xl overflow-hidden border border-slate-700">
        
        <div class="bg-slate-900 p-6 text-center border-b border-slate-700">
            <div class="text-4xl mb-2">ğŸš¢</div>
            <h1 class="text-2xl font-black text-blue-400">ë…ë„ë¬¸ë°©êµ¬ ë°°ì†¡ ê³„ì‚°ê¸°</h1>
            <p class="text-slate-400 text-sm mt-1">ìš¸ë¦‰ë„ í˜„ì§€ ë‚ ì”¨(íŒŒê³ ) ê¸°ë°˜ ì˜ˆì¸¡ ì‹œìŠ¤í…œ</p>
        </div>

        <div class="p-6 space-y-6">
            <div>
                <label class="block text-slate-300 text-sm font-bold mb-2">ì£¼ë¬¸ ë‚ ì§œ</label>
                <input type="date" id="orderDate" class="w-full bg-slate-700 border border-slate-600 text-white rounded-lg p-3 focus:outline-none focus:border-blue-500 transition-colors">
            </div>

            <div>
                <label class="block text-slate-300 text-sm font-bold mb-2">ì£¼ë¬¸ ì‹œê°„ (ë§ˆê° ê¸°ì¤€)</label>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="setOrderTime(9)" id="timeBefore" class="time-btn bg-blue-600 text-white py-3 rounded-lg font-bold border-2 border-transparent">
                        ì˜¤ì „ 10ì‹œ ì „<br><span class="text-xs font-normal text-blue-100">(ë‹¹ì¼ ë°œì†¡ ê°€ëŠ¥)</span>
                    </button>
                    <button onclick="setOrderTime(14)" id="timeAfter" class="time-btn bg-slate-700 text-slate-400 py-3 rounded-lg font-bold border-2 border-transparent hover:bg-slate-600">
                        ì˜¤ì „ 10ì‹œ í›„<br><span class="text-xs font-normal text-slate-500">(ë‹¤ìŒ ë°°í¸)</span>
                    </button>
                </div>
                <input type="hidden" id="selectedHour" value="9"> </div>

            <button onclick="calculateShipping()" class="w-full bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-black py-4 rounded-xl text-lg shadow-lg transform transition hover:scale-[1.02]">
                ì˜ˆìƒ ë„ì°©ì¼ ì¡°íšŒí•˜ê¸° ğŸ”
            </button>
        </div>

        <div id="resultArea" class="hidden bg-slate-900 p-6 border-t border-slate-700 animate-fade-in">
            <div class="text-center">
                <p class="text-slate-400 text-sm mb-1">ì˜ˆìƒ ë„ì°©ì¼ì€?</p>
                <h2 id="arrivalDateText" class="text-3xl font-black text-yellow-400 mb-4">2026. 02. 14 (í† )</h2>
                
                <div class="space-y-3 text-left bg-slate-800 p-4 rounded-lg border border-slate-700">
                    <div class="flex items-start">
                        <div class="mr-3 mt-1">ğŸ›’</div>
                        <div>
                            <p class="text-xs text-slate-500">ì£¼ë¬¸ ì ‘ìˆ˜</p>
                            <p id="step1_text" class="font-bold text-slate-200">2.10 (í™”)</p>
                        </div>
                    </div>
                    
                    <div class="pl-2.5 text-slate-600">â†“</div>

                    <div class="flex items-start">
                        <div class="mr-3 mt-1">ğŸš¢</div>
                        <div>
                            <p class="text-xs text-slate-500">ìš¸ë¦‰ë„ ì¶œí•­ (ë°° ëœ¨ëŠ” ë‚ )</p>
                            <p id="step2_text" class="font-bold text-blue-300">2.12 (ëª©)</p>
                            <p id="weather_warning" class="text-xs text-red-400 mt-1 hidden">âš ï¸ ì´ì „ ë°°í¸ì€ ë†’ì€ íŒŒê³ ë¡œ ê²°í•­ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>

                    <div class="pl-2.5 text-slate-600">â†“</div>

                    <div class="flex items-start">
                        <div class="mr-3 mt-1">ğŸ</div>
                        <div>
                            <p class="text-xs text-slate-500">ë„ì°© ì˜ˆì •</p>
                            <p id="step3_text" class="font-bold text-yellow-400">2.14 (í† )</p>
                        </div>
                    </div>
                </div>
                
                <p class="text-xs text-slate-500 mt-4 text-center">
                    * ê¸°ìƒ ì•…í™” ì‹œ ì¼ì •ì´ ë³€ë™ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                    * ë„ì„œ ì‚°ê°„ ì§€ì—­ì€ 1-2ì¼ ì¶”ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>
    </div>

    <script>
        // ê¸°ë³¸ ë‚ ì§œë¥¼ ì˜¤ëŠ˜ë¡œ ì„¤ì •
        document.getElementById('orderDate').valueAsDate = new Date();

        // ì‹œê°„ ì„ íƒ ë²„íŠ¼ UI ì²˜ë¦¬
        function setOrderTime(hour) {
            document.getElementById('selectedHour').value = hour;
            
            // ìŠ¤íƒ€ì¼ ë³€ê²½ (Before/After í† ê¸€)
            const btnBefore = document.getElementById('timeBefore');
            const btnAfter = document.getElementById('timeAfter');
            
            if (hour < 10) { // 10ì‹œ ì „ ì„ íƒ ì‹œ
                btnBefore.className = "time-btn bg-blue-600 text-white py-3 rounded-lg font-bold border-2 border-transparent";
                btnBefore.querySelector('span').className = "text-xs font-normal text-blue-100";
                
                btnAfter.className = "time-btn bg-slate-700 text-slate-400 py-3 rounded-lg font-bold border-2 border-transparent hover:bg-slate-600";
                btnAfter.querySelector('span').className = "text-xs font-normal text-slate-500";
            } else { // 10ì‹œ í›„ ì„ íƒ ì‹œ
                btnBefore.className = "time-btn bg-slate-700 text-slate-400 py-3 rounded-lg font-bold border-2 border-transparent hover:bg-slate-600";
                btnBefore.querySelector('span').className = "text-xs font-normal text-slate-500";
                
                btnAfter.className = "time-btn bg-blue-600 text-white py-3 rounded-lg font-bold border-2 border-transparent";
                btnAfter.querySelector('span').className = "text-xs font-normal text-blue-100";
            }
        }

        // --- [í•µì‹¬ ë¡œì§] ---

        // ê°€ì§œ ë‚ ì”¨ ë°ì´í„° ìƒì„±ê¸° (í…ŒìŠ¤íŠ¸ìš©)
        // ì‹¤ì œ API ëŒ€ì‹ , ë‚ ì§œë¥¼ ë„£ìœ¼ë©´ ëœë¤í•˜ê²Œ "íŒŒê³  ë†’ìŒ(true)" ë˜ëŠ” "ë‚®ìŒ(false)"ì„ ë°˜í™˜
        function getVirtualWeather(date) {
            // ì‹œì—°ì„ ìœ„í•´ 'ë§¤ë‹¬ 10ì¼, 20ì¼'ì€ íŒŒë„ê°€ ë†’ë‹¤ê³  ê°€ì • (í…ŒìŠ¤íŠ¸í•  ë•Œ ë‚ ì§œë¥¼ 10ì¼ë¡œ ì„¤ì •í•´ë³´ì„¸ìš”!)
            const day = date.getDate();
            if (day === 10 || day === 20) {
                return { isBad: true, height: 3.5 };
            }
            // ê·¸ ì™¸ì—ëŠ” ëœë¤í•˜ê²Œ 10% í™•ë¥ ë¡œ ê²°í•­
            const isBad = Math.random() < 0.1; 
            return { isBad: isBad, height: isBad ? 3.0 : 1.0 };
        }

        function calculateShipping() {
            // 1. ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
            const dateInput = document.getElementById('orderDate').value;
            const hourInput = parseInt(document.getElementById('selectedHour').value);

            if (!dateInput) {
                alert("ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");
                return;
            }

            let currentDate = new Date(dateInput);
            currentDate.setHours(hourInput);

            // í™”ë©´ì— í‘œì‹œí•  ì£¼ë¬¸ì¼ ì €ì¥
            const orderDateStr = formatDate(currentDate);

            // 2. 1ì°¨ ë°œì†¡ ì˜ˆì •ì¼ ê³„ì‚°
            // ìš¸ë¦‰ë„ ë°°ì†¡ ìš”ì¼: í™”(2), ëª©(4), í† (6)
            const SHIPPING_DAYS = [2, 4, 6]; 
            const CUTOFF_HOUR = 10;

            // ë§Œì•½ ì˜¤ëŠ˜ì´ ë°°ì†¡ì¼ì´ê³  & 10ì‹œê°€ ë„˜ì—ˆìœ¼ë©´ -> ë‚´ì¼ë¡œ ë„˜ê¹€
            if (SHIPPING_DAYS.includes(currentDate.getDay()) && currentDate.getHours() >= CUTOFF_HOUR) {
                currentDate.setDate(currentDate.getDate() + 1);
            }

            // 3. ë‚ ì”¨ ì²´í¬ ë£¨í”„ (ë°°ê°€ ëœ° ìˆ˜ ìˆëŠ” ë‚  ì°¾ê¸°)
            let isWeatherDelay = false; // ë‚ ì”¨ ë•Œë¬¸ì— ì§€ì—°ëëŠ”ì§€ ì—¬ë¶€
            let attempts = 0;

            while (attempts < 14) { // ë¬´í•œë£¨í”„ ë°©ì§€ (ìµœëŒ€ 2ì£¼ íƒìƒ‰)
                const dayOfWeek = currentDate.getDay();

                // ë°°ì†¡ ìš”ì¼(í™”/ëª©/í† )ì´ ì•„ë‹ˆë©´ í•˜ë£¨ ë„˜ê¹€
                if (!SHIPPING_DAYS.includes(dayOfWeek)) {
                    currentDate.setDate(currentDate.getDate() + 1);
                    continue;
                }

                // ë°°ì†¡ ìš”ì¼ì´ë©´ ë‚ ì”¨ í™•ì¸
                const weather = getVirtualWeather(currentDate);

                if (weather.isBad) {
                    console.log(`ğŸŒŠ ${formatDate(currentDate)}ì€ íŒŒê³  ${weather.height}më¡œ ê²°í•­!`);
                    isWeatherDelay = true; // ì§€ì—° ë°œìƒ í”Œë˜ê·¸ ì¼¬
                    currentDate.setDate(currentDate.getDate() + 1); // ë‹¤ìŒ ë‚ ë¡œ ì´ë™
                } else {
                    console.log(`ğŸš¢ ${formatDate(currentDate)} ë°œì†¡ í™•ì •!`);
                    break; // ë°° ëœ¸! ë£¨í”„ ì¢…ë£Œ
                }
                attempts++;
            }

            // 4. ë„ì°© ì˜ˆì •ì¼ (ë°œì†¡ì¼ + 2ì¼)
            const shipDate = new Date(currentDate);
            const arrivalDate = new Date(shipDate);
            arrivalDate.setDate(arrivalDate.getDate() + 2);

            // 5. ê²°ê³¼ í™”ë©´ ì¶œë ¥
            document.getElementById('resultArea').classList.remove('hidden');
            
            // ë‚ ì§œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('arrivalDateText').innerText = formatDateWithDay(arrivalDate);
            document.getElementById('step1_text').innerText = orderDateStr;
            document.getElementById('step2_text').innerText = formatDateWithDay(shipDate);
            document.getElementById('step3_text').innerText = formatDateWithDay(arrivalDate);

            // ë‚ ì”¨ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ ì—¬ë¶€
            const warningEl = document.getElementById('weather_warning');
            if (isWeatherDelay) {
                warningEl.classList.remove('hidden');
            } else {
                warningEl.classList.add('hidden');
            }
        }

        // ë‚ ì§œ í¬ë§· í—¬í¼ í•¨ìˆ˜ (YYYY. MM. DD)
        function formatDate(date) {
            return `${date.getMonth() + 1}.${date.getDate()}`;
        }
        
        // ë‚ ì§œ í¬ë§· í—¬í¼ í•¨ìˆ˜ (YYYY. MM. DD (ìš”ì¼))
        function formatDateWithDay(date) {
            const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            return `${date.getFullYear()}. ${date.getMonth() + 1}. ${date.getDate()} (${days[date.getDay()]})`;
        }
    </script>
</body>
</html>
